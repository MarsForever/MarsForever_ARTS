利用しているVPCのパブリックサブネットにAWS クライアントVPNを構成して、会計アプリの全ユーザーが利用するラックトップにOpenVPN ベースの VPN クライアントアプリケーションをインストールします。さらにプライベートサブネットを構成して、アプリケーションサーバーを移行します。

VPN接続はパブリックインターネット経由でアカウンティングアプリケーションへの安全な接続を提供するため、SSLを使用したELBなどと比較して、最適なソリューションです。AWS クライアントVPN はAWS リソースやオンプレミスネットワーク内のリソースに安全にアクセスできるようにする、クライアントベースのマネージド VPN サービスです。クライアント VPN を使用すると、OpenVPN ベースの VPN クライアントを使用して、どこからでもリソースにアクセスできます。

AWS クライアントVPN においては、クライアント VPN エンドポイントの管理者およびクライアントとやり取りする 2 つのタイプのユーザーがいます。



■管理者は、サービスの設定と設定を担当します。このプロセスには、クライアント VPN エンドポイントの作成、ターゲットネットワークの関連付け、認証ルールの設定、および追加のルート (必要な場合) の設定が含まれます。クライアント VPN エンドポイントを設定した後、管理者は クライアント VPN エンドポイント設定ファイルをダウンロードして、アクセスが必要なクライアントに配布します。クライアント VPN エンドポイント設定ファイルには、クライアント VPN エンドポイントの DNS 名と、VPN セッションを確立するために必要な証明書情報が含まれています。

■クライアントはエンドユーザーです。これは、VPN セッションを確立するために クライアント VPN エンドポイントに接続する人です。クライアントは OpenVPN ベースの VPN クライアントアプリケーションを使用して、ローカルコンピュータまたはモバイルデバイスから VPN セッションを確立します。VPN セッションが確立されたら、関連付けられているサブネットが存在する VPC のリソースに安全にアクセスできます。必要なルートと認証ルールが設定されている場合は、AWS またはオンプレミスネットワークの他のリソースにもアクセスできます。 







AWS Directory Serviceを利用して、既存のMS Active DirectoryとAWSリソース管理とを統合し、AWS Managed Microsoft AD を利用してシングルサインオンを実現することができます。

既存の AD インフラストラクチャを使用して AD 対応ワークロードを AWS クラウドに移行する場合は、AWS Managed Microsoft AD が適任です。AD の信用を使用して AWS Managed Microsoft AD を既存の AD に接続できます。つまり、AD 対応アプリケーションと AWS アプリケーションにユーザーはオンプレミス AD 認証情報でアクセスでき、そのためのユーザー、グループ、またはパスワードの同期は不要です。たとえば、ユーザーは既存の AD ユーザー名とパスワードを使用して、AWS マネジメントコンソール と Amazon WorkSpaces にサインインできます。また、AWS Managed Microsoft AD で SharePoint などの AD 対応アプリケーションを使用すると、ログインした Windows ユーザーは認証情報の再入力なし、これらのアプリケーションにアクセスできるようになります。







AD Connector を利用してもシングルサインインを実現することは可能です。Windows Server 2003 以降で実行されるドメインコントローラを VPC にプロキシすることで、AD ドメインのログイン情報で AWS の Management Console にシングルサインオン (SSO)とすることができます。しかしながら、既存の AD 対応ワークロードを AWS クラウドに移行する場合は、AWS Managed Microsoft AD が適任であり、不正解となります。



予測可能なネットワークパフォーマンスを提供する要件からAWS Direct Connectが最適な選択となります。Amazon VPCはAWS上に論理的に独立した仮想クラウドを作成する機能ですが、このVPCと既存データセンターやホームネットワークなどをIPSec VPNにて接続する、AWSハードウェアVPN接続を利用可能です。Direct Connectは、AWS ハードウェア VPN 接続と組み合わせて、IPsec で暗号化された接続を作成することができます。

安全なIPsec VPN接続を実現することや、コスト効率の良い方法で可用性を達成するためには、ハードウェア VPN を Direct Connect 接続のフェールオーバーオプションとして設定することを検討してください。VPN 接続は、ほとんどの Direct Connect 接続で利用できる帯域幅と同じレベルを提供するようには設計されていません。VPN を Direct Connect 接続のバックアップとして設定している場合、ユースケースまたはアプリケーションがより低い帯域幅を許容できることを確認してください。



AWS Security Token Service (AWS STS) を使用して、AWS リソースへのアクセスをコントロールできる一時的セキュリティ認証情報を持つ、信頼されたユーザーを作成および提供することができます。これを ユーザーを認証するためのカスタムIDブローカーを作成し、認証手続きを進めることができます。AssumeRoleはAWSリソースへのアクセスに使用できる一時的なセキュリティ認証情報のセットを返します。 これらの一時的な資格情報は、アクセスキーID、シークレットアクセスキー、およびセキュリティトークンで構成されます。 通常、AssumeRoleはアカウント内またはクロスアカウントアクセスに使用します。 したがって、オプション３が正解となります。 

GetFederationTokenではフェデレーションユーザーの一連の一時的なセキュリティ資格情報（アクセスキーID、シークレットアクセスキー、およびセキュリティトークンで構成される）を返します。IAMユーザーの長期的なセキュリティ認証情報を使用してGetFederationTokenオペレーションを呼び出す必要があります。 その結果、この呼び出しにより、サーバーベースのアプリケーションにおいて、これらの資格情報を安全に保存することができます。したがって、オプション４も正解となります。



AD ConnectorとAmazon Congitoの組合せでは ユーザーを認証するためのカスタムIDブローカーを作成し、認証手続きを進めると設定ができないため、オプション１と２は不正解です。

疑問点

AD Connectorとは